# 乡递通(RuralExpress)技术栈

## 前端技术栈

### 基础框架
- **UniApp**: 跨平台前端框架，一套代码可发布到iOS、Android、Web等多个平台
- **Vue.js 3**: 渐进式JavaScript框架
- **TypeScript**: JavaScript的超集，提供类型检查

### UI组件库
- **uView UI**: 专为uniapp打造的UI框架
- **微信小程序组件**: 微信官方提供的小程序组件

### 状态管理
- **Pinia**: Vue.js的状态管理库，Vue 3的官方推荐

### 地图服务
- **腾讯地图API**: 提供位置服务、路线规划等功能

### HTTP请求
- **Axios**: 基于Promise的HTTP客户端
- **uni.request**: UniApp提供的网络请求API

## 后端技术栈

### 基础框架
- **Spring Boot 2.7.x**: 简化Spring应用开发的框架
- **Spring Security**: 安全框架，处理认证和授权
- **Spring Data JPA**: 简化数据库访问的框架

### 数据库
- **MySQL 8.0**: 关系型数据库
- **Redis**: 缓存和会话管理

### API文档
- **Swagger/OpenAPI 3.0**: API文档生成工具
- **Knife4j**: 基于Swagger的增强UI界面

### 支付集成
- **微信支付SDK**: 微信支付接口

### 消息队列
- **RocketMQ**: 分布式消息队列系统，处理异步任务

### 存储服务
- **阿里云OSS**: 对象存储服务，存储图片等静态资源

## 开发工具

### 前端开发
- **HBuilderX**: UniApp官方推荐IDE
- **微信开发者工具**: 微信小程序开发和调试工具
- **VS Code**: 轻量级代码编辑器

### 后端开发
- **IntelliJ IDEA**: Java开发IDE
- **Maven**: 项目构建和依赖管理工具

### 数据库工具
- **Navicat/DBeaver**: 数据库管理工具

### 版本控制
- **Git**: 分布式版本控制系统
- **GitHub/GitLab**: 代码托管平台

## 部署环境

### 容器化
- **Docker**: 应用容器引擎
- **Docker Compose**: 定义和运行多容器Docker应用

### 服务器
- **阿里云ECS**: 云服务器
- **Nginx**: Web服务器，用于反向代理和负载均衡

### CI/CD
- **Jenkins/GitHub Actions**: 持续集成/持续部署工具

## 监控与日志
- **Spring Boot Actuator**: 监控Spring Boot应用
- **ELK Stack**: Elasticsearch、Logstash和Kibana，用于日志管理
- **Prometheus + Grafana**: 系统监控和可视化

## 安全措施

### 认证与授权
- **JWT (JSON Web Token)**: 用于用户认证和会话管理
- **Spring Security**: 提供应用安全框架
- **RBAC权限模型**: 基于角色的访问控制系统
- **密码加密**: 使用BCrypt算法进行密码存储

### 数据安全
- **HTTPS**: 所有API通信采用SSL/TLS加密
- **敏感数据加密**: 身份证号等敏感信息采用AES加密存储
- **SQL注入防护**: 使用参数化查询和MyBatis预处理语句
- **XSS防护**: 前端输入验证和输出转义
- **CSRF防护**: 使用CSRF Token防止跨站请求伪造

### API安全
- **接口限流**: 基于Redis的请求限流策略
- **请求签名**: 重要接口采用请求签名机制
- **日志审计**: 记录关键操作日志，支持安全审计

## 性能优化

### 前端优化
- **资源压缩**: JS、CSS、图片等资源压缩
- **懒加载**: 图片和组件按需加载
- **缓存策略**: 静态资源缓存
- **虚拟列表**: 长列表使用虚拟滚动技术
- **减少重绘**: 合理使用Vue的响应式机制

### 后端优化
- **数据库优化**:
  - 索引设计: 为常用查询字段建立合适索引
  - 分页查询: 所有列表查询支持分页
  - 连接池: 使用HikariCP连接池管理数据库连接
- **缓存策略**:
  - Redis缓存: 热点数据缓存
  - 本地缓存: 使用Caffeine做本地缓存
  - 缓存穿透防护: 使用BloomFilter
- **异步处理**:
  - 消息队列: 使用RocketMQ处理异步任务
  - 线程池: 自定义线程池处理并发请求

### 数据库优化
- **SQL优化**: 避免全表扫描，优化JOIN查询
- **分库分表**: 为未来大数据量做准备，设计分库分表方案
- **读写分离**: 准备主从复制架构，分离读写操作

## 版本兼容性

### 前端兼容性
- **微信小程序**: 支持微信7.0.0及以上版本
- **浏览器**: 支持主流浏览器最新版本
  - Chrome: 88+
  - Firefox: 85+
  - Safari: 14+
  - Edge: 88+
- **移动设备**: 
  - iOS: 11.0+
  - Android: 7.0+

### 后端兼容性
- **Java**: JDK 11+
- **Spring Boot**: 2.7.x
- **MySQL**: 8.0+
- **Redis**: 5.0+

### API兼容性
- **向后兼容原则**: 新API版本必须兼容旧版本
- **API版本控制**: 通过URI路径进行版本控制，如`/api/v1/`
- **废弃策略**: API废弃前至少提前2个版本发布通知

## 扩展性设计

### 微服务准备
项目初期采用单体架构，但设计时考虑未来微服务拆分：
- 按业务领域划分模块，保持高内聚低耦合
- 使用事件驱动架构，为未来服务间通信做准备
- API网关设计，为未来服务路由做准备

### 插件化架构
- 支付模块支持多种支付渠道插件化集成
- 地图服务支持多个地图服务提供商切换
- 消息推送支持多种推送渠道

### 国际化支持
- 支持中文、英文界面切换
- 使用i18n国际化解决方案
- 日期、货币等格式本地化显示 